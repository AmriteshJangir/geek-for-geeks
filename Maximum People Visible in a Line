Question:

You are given an array arr[ ], where arr[i] represents the height of the ith person standing in a line.
A person i can see another person j if:
height[j] < height[i],
There is no person k standing between them such that height[k] â‰¥ height[i].
Each person can see in both directions (front and back).
Your task is to find the maximum number of people that any person can see (including themselves).
Examples:
Input: arr[] = [6, 2, 5, 4, 5, 1, 6 ]
Output: 6
Explanation:
Person 1 (height = 6) can see five other people at following positions (2, 3, 4, 5. 6) in addition to himself, i.e. total 6.
Person 2 (height: 2) can see only himself.
Person 3 (height = 5) is able to see people 2nd, 3rd, and 4th person.
Person 4 (height = 4) can see himself.
Person 5 (height = 5) can see people 4th, 5th, and 6th.
Person 6 (height =1) can only see himself.
Person 7 (height = 6) can see 2nd, 3rd, 4th, 5th, 6th, and 7th people.
A maximum of six people can be seen by Person 1, 7th
Input: arr[] = [1, 3, 6, 4]
Output: 4
Explanation: 
Person with height 6 can see persons with heights 1, 3 on the left and 4 on the right, along with himself, giving a total of 4.

Solution:
class Solution {
  public:
    int maxPeople(vector<int> &heights) {
        int size = heights.size();
        vector<int> nearestLeft(size, -1), nearestRight(size, size);
        stack<int> indexStack;
        for (int current = 0; current < size; current++) {
            while (!indexStack.empty() &&
                   heights[indexStack.top()] < heights[current]) {
                indexStack.pop();
            }
            if (!indexStack.empty())
                nearestLeft[current] = indexStack.top();
            indexStack.push(current);
        }
        while (!indexStack.empty()) indexStack.pop();
        for (int current = size - 1; current >= 0; current--) {
            while (!indexStack.empty() &&
                   heights[indexStack.top()] < heights[current]) {
                indexStack.pop();
            }
            if (!indexStack.empty())
                nearestRight[current] = indexStack.top();
            indexStack.push(current);
        }
        int maxVisiblePeople = 0;
        for (int i = 0; i < size; i++) {
            int visibleOnLeft  = i - nearestLeft[i] - 1;
            int visibleOnRight = nearestRight[i] - i - 1;
            maxVisiblePeople = max(
                maxVisiblePeople,
                visibleOnLeft + visibleOnRight + 1  
            );
        }
        return maxVisiblePeople;
    }
};
